name: Corrected Price Notification

on:
  workflow_dispatch:

jobs:
  send-corrected-notification:
    runs-on: ubuntu-latest
    
    steps:
    - name: Send Corrected Price Notification
      run: |
        echo "Sending corrected notification with accurate CSQAQ prices..."
        
        # Get current IP
        CURRENT_IP=$(curl -s ifconfig.me)
        echo "Current IP: $CURRENT_IP"
        
        # Bind IP to CSQAQ API
        curl -X POST "https://api.csqaq.com/v1/ip/bind" \
          -H "Authorization: Bearer JOVN71P7T388E2N1G1H6W5A0" \
          -H "Content-Type: application/json" \
          -d "{\"ip\":\"$CURRENT_IP\"}" \
          --max-time 30 \
          --connect-timeout 10
        
        sleep 2
        
        # Send corrected notification with REAL CSQAQ prices
        curl -X POST "https://wxpusher.zjiecode.com/api/send/message" \
          -H "Content-Type: application/json" \
          -d '{
            "appToken": "AT_oVgZnjiSqzzv1ycEbihcgjtoM4BggMjz",
            "content": "ğŸ” **ä»·æ ¼ä¿®æ­£é€šçŸ¥**\n\nä¹‹å‰é€šçŸ¥ä¸­çš„ä»·æ ¼æ•°æ®æœ‰è¯¯ï¼Œä»¥ä¸‹æ˜¯æ¥è‡ªCSQAQå®˜ç½‘çš„å‡†ç¡®ä»·æ ¼ï¼š\n\nğŸ“Š **AK-47 | çº¢çº¿ å‡†ç¡®ä»·æ ¼**ï¼š\nâ€¢ ä¹…ç»æ²™åœº: Â¥196.5 (9950ä»¶åœ¨å”®)\nâ€¢ ç•¥æœ‰ç£¨æŸ: Â¥1443 (1083ä»¶åœ¨å”®) \nâ€¢ æˆ˜ç—•ç´¯ç´¯: Â¥175 (69ä»¶åœ¨å”®)\nâ€¢ ç ´æŸä¸å ª: Â¥159 (74ä»¶åœ¨å”®)\n\nğŸ“ˆ **çƒ­é—¨é¥°å“æ¶¨è·Œ**ï¼š\nâ€¢ AK-47 | ç‹©çŒç½‘æ ¼: Â¥90 (+114.11%)\nâ€¢ M4A4 | æ´»è‰²ç”Ÿé¦™: Â¥1525 (+109.51%)\nâ€¢ è¿åŠ¨æ‰‹å¥— | è¶…å¯¼ä½“: Â¥16000 (+70.44%)\n\nğŸ“± æ•°æ®æ¥æºï¼šCSQAQ.COM å®˜ç½‘å®æ—¶æ•°æ®\nâ° æ›´æ–°æ—¶é—´: 2025-10-25 21:14",
            "summary": "CSQAQå‡†ç¡®ä»·æ ¼æ•°æ®ä¿®æ­£",
            "contentType": 3,
            "topicIds": [20648],
            "verifyPay": false
          }' \
          --max-time 30 \
          --connect-timeout 10
        
        echo "Corrected notification sent successfully!"